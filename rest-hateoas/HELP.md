# REST风格——HATEOAS超媒体格式

## HATEOAS 概念

> HATEOAS (Hypermedia as the Engine of Application State) 被称为超媒体驱动是因为它的设计思想主张使用超媒体来驱动应用程序的状态转换。在 HATEOAS 中，每个资源都包含了可以让客户端进行状态转换所需的所有信息，包括可执行的操作和相关参数等。这些信息以超媒体格式（例如 HTML 或 JSON）呈现，因此客户端能够使用这些超媒体链接自动地发现和执行状态转换。

## REST 架构

### REST 风格
REST架构风格成为当今构建Web服务时，应该遵循的事实标准。

### REST 定义
> REST (representational stat transfer) 表达性状态转换

只有满足这些约束，才能称为符合REST架构风格
1. REST是一种架构风格，它包含了一个分布式超文本系统中对于组件、连接器和数据的约束。
2. REST是作为互联网自身架构的抽象而出现的，其关键在于所定义的架构上的各种约束。

### REST 约束
1. 客户端 --- 服务器 结构
    ```
    通过一个统一的接口来分开客户端和服务器，使得两者可以独立开发和演化。客户端的实现可以简化，而服务器可以更容易满足伸缩性的要求。
    ```
   ![](imgs/客户端-服务器.png)
2. 无状态
    ```
    在不同的客户端请求之间，服务器并不保存客户端相关的上下文状态信息。任何客户端发出的每个请求都包含了服务器处理改请求所需的全部信息。
    ```
   ![](imgs/无状态.png)
3. 可缓存
    ```
    客户端可以缓存服务器返回的响应结果，服务器可以定义响应结果的缓存设置。
    ```
   ![](imgs/缓存.png)
4. 分层的系统
    ```
    在分层的系统中，可能有中间服务器来处理安全策略和缓存的相关的问题，以提高系统的可伸缩性。而客户端并不需要了解中间这些层次的细节。
    ```
   ![](imgs/中间服务器.png)
5. 按需代码（可选）
    ```
    服务器可以通过传输可执行代码的方式来扩展或自定义客户端的行为，这是一个可选的约束。
    ```
6. 统一接口
   > 该约束是REST服务的基础，是客户端和服务器之间的桥梁，该约束又包含下面4个子约束。
   1. 资源标识符
      > 每个资源都有各自的标识符，客户端在请求时需要指定该标识符。在REST服务中，该标识符通常是URI。
      > 客户端所获取的是资源的表达（representation），通常使用XML或JSON格式。 
   2. 通过资源的表达来操作资源
      > 客户端根据所得到的资源的表达中包含的信息，来了解如何操作资源，比如对资源进行修改或删除。
   3. 自描述的消息
      > 每条消息都包含足够的信息来描述如何处理该消息。
   4. 超媒体作为应用状态的引擎（HATEOAS）
      > 客户端通过服务器提供的超媒体内容中动态提供的动作来进行状态转换。

### 表达性状态转换
> "表达性" 是指对于资源的操作都是通过服务器提供的资源的表达式来进行的。

Spring Hateoas是一个用于支持实现超文本驱动的REST Web服务的开发库。

https://www.cnblogs.com/kaixinyufeng/p/8283289.html


使用方式：
```xml
<dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-starter-hateoas</artifactId>
</dependency>
```

参考链接： https://www.cnblogs.com/kaixinyufeng/p/8283289.html

### 测试
发送请求: http://localhost:5016/greeting
返回结果: 
```
{"content":"Hello, zhuzhe!","_links":{"self":{"href":"http://localhost:5016/greeting?name=zhuzhe"}}}
```

